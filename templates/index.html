{% extends 'layout.html' %}

{% block body %}
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h2>Video</h2>
                <form method="POST" enctype="multipart/form-data">
                    <input type="file" accept="video/*" name="video_name">
                    <input type="submit" value="upload">
                </form>

                {% if upload %}
                    <video width="480" height="270" controls>
                    <source src={{ url_for('static', filename= 'upload/' + video_name) }} type="video/mp4">
                    </video>
                {% endif %}

            </div>
            <div class="col-md-6">
                <h2>Result</h2>
                {% if upload %}
                    <video width="480" height="270" controls>
                    <source src={{ url_for('static', filename = 'predict/' + video_name) }} type="video/mp4">
                    </video>
                {% endif %}
            </div>
        </div>
    </div>
    <script>
        var interval = setInterval(function(){
          var countForVideo = document.getElementById('vid').readyState;
          if(countForVideo == 4){
            document.getElementById('vid').play();
            clearInterval(interval);
          }
        },2000);
    </script>
{% endblock %}